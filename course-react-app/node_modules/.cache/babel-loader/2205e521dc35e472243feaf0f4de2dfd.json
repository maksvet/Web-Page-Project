{"ast":null,"code":"import _regeneratorRuntime from\"/Users/MakSim/FS1030CourseProject/course-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/MakSim/FS1030CourseProject/course-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/MakSim/FS1030CourseProject/course-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),jwt=_useState6[0],setJwt=_useState6[1];var formSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch('https://fs1040course-project-p2xhr6rraq-nn.a.run.app/auth',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:payload=_context.sent;if(response.status>=400){alert(\"Oops! Error: \".concat(payload));}else{localStorage.setItem('token',payload.token);setJwt(payload.token);alert(\"You are logged in!\");history.push(\"/entriespage\");}case 8:case\"end\":return _context.stop();}}},_callee);}));return function formSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Your email...\",required:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Your password...\",required:true,value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]})]});};export default Login;","map":{"version":3,"sources":["/Users/MakSim/FS1030CourseProject/course-react-app/src/Login.js"],"names":["React","useState","useHistory","Login","props","history","email","setEmail","password","setPassword","jwt","setJwt","formSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","payload","status","alert","localStorage","setItem","token","push","e","target","value"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEE,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACzB,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CADyB,cAECD,QAAQ,CAAC,EAAD,CAFT,wCAElBK,KAFkB,eAEXC,QAFW,8BAGON,QAAQ,CAAC,EAAD,CAHf,yCAGlBO,QAHkB,eAGRC,WAHQ,8BAIHR,QAAQ,CAAC,EAAD,CAJL,yCAIlBS,GAJkB,eAIbC,MAJa,eAKzB,GAAMC,CAAAA,UAAU,0FAAG,iBAAMC,KAAN,uIACjBA,KAAK,CAACC,cAAN,GADiB,sBAEMC,CAAAA,KAAK,CAAC,2DAAD,CAA8D,CAClFC,MAAM,CAAE,MAD0E,CAElFC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFyE,CAMlFC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACd,KAAK,CAALA,KAAD,CAAQE,QAAQ,CAARA,QAAR,CAAf,CAN4E,CAA9D,CAFX,QAEXa,QAFW,qCAUSA,CAAAA,QAAQ,CAACC,IAAT,EAVT,QAUPC,OAVO,eAWb,GAAIF,QAAQ,CAACG,MAAT,EAAmB,GAAvB,CAA4B,CAC1BC,KAAK,wBAAiBF,OAAjB,EAAL,CACD,CAFD,IAEO,CACHG,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BJ,OAAO,CAACK,KAAtC,EACAjB,MAAM,CAACY,OAAO,CAACK,KAAT,CAAN,CACAH,KAAK,sBAAL,CACApB,OAAO,CAACwB,IAAR,CAAa,cAAb,EAGH,CApBY,sDAAH,kBAAVjB,CAAAA,UAAU,4CAAhB,CAyBE,mBACI,oCACA,mCADA,cAEF,cAAM,QAAQ,CAAEA,UAAhB,wBACA,cAAO,OAAO,CAAC,MAAf,EADA,cAEA,cAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAC,OAAvB,CAA+B,IAAI,CAAC,OAApC,CAA4C,WAAW,CAAC,eAAxD,CAAwE,QAAQ,KAAhF,CAAiF,KAAK,CAAEN,KAAxF,CAA+F,QAAQ,CAAE,kBAAAwB,CAAC,QAAIvB,CAAAA,QAAQ,CAACuB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ,EAA1G,EAFA,cAIA,cAAO,OAAO,CAAC,UAAf,EAJA,cAKA,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,UAA1B,CAAqC,IAAI,CAAC,UAA1C,CAAqD,WAAW,CAAC,kBAAjE,CAAoF,QAAQ,KAA5F,CAA6F,KAAK,CAAExB,QAApG,CAA8G,QAAQ,CAAE,kBAAAsB,CAAC,QAAIrB,CAAAA,WAAW,CAACqB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAAzH,EALA,cAMF,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,EANE,GAFE,GADJ,CAeH,CA7CC,CA+CF,cAAe7B,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\n  const Login = (props) => {\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [jwt, setJwt] = useState(\"\")\n  const formSubmit = async event => {\n    event.preventDefault()\n    const response = await fetch('https://fs1040course-project-p2xhr6rraq-nn.a.run.app/auth', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify({email, password})\n        })\n        const payload = await response.json()\n        if (response.status >= 400) {\n          alert(`Oops! Error: ${payload}`)\n        } else {\n            localStorage.setItem('token', payload.token)\n            setJwt(payload.token)\n            alert(`You are logged in!`)\n            history.push(\"/entriespage\");\n            \n\n        }\n        \n  }\n\n\n    return(\n        <div>\n        <h1>Admin login</h1>\n      <form onSubmit={formSubmit}>\n      <label htmlFor=\"name\"></label>\n      <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Your email...\" required value={email} onChange={e => setEmail(e.target.value)}/>\n  \n      <label htmlFor=\"password\"></label>\n      <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Your password...\" required value={password} onChange={e => setPassword(e.target.value)}/>\n    <input type=\"submit\" value=\"Submit\"/>\n    </form>\n    </div>\n   )\n    \n  \n}\n \nexport default Login;"]},"metadata":{},"sourceType":"module"}